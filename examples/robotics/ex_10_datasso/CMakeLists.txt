# ==================================================================
#  tubex-lib / robotics example - cmake configuration file
# ==================================================================

cmake_minimum_required(VERSION 3.0.2)
project(tubex_rob_10 LANGUAGES CXX)

# Compilation options
set(CMAKE_CXX_STANDARD 11)
add_compile_options(-O3 -Wall)
#add_compile_options(-DNDEBUG) # comment for debug mode
if(WIN32)
  add_definitions(-U__STRICT_ANSI__)
endif()

# Dependencies
include(FindPkgConfig)
pkg_search_module(TUBEX REQUIRED tubex)
message(STATUS "Found Tubex version ${TUBEX_VERSION}")

find_package(PkgConfig REQUIRED)
pkg_search_module(PKG_CAPD REQUIRED  capd capd-gui mpcapd mpcapd-gui )  # this looks for capd.pc file
include_directories(${PKG_CAPD_INCLUDE_DIRS})
message(STATUS "[CAPD INTEGRATION] PKG_CAPD_INCLUDE_DIRS = ${PKG_CAPD_INCLUDE_DIRS}")
message(STATUS "[CAPD INTEGRATION] PKG_CAPD_LDFLAGS = ${PKG_CAPD_LDFLAGS}")



################################################################################
# (to be removed) With Gaol, we add "-Wno-deprecated" to remove lots of warnings
#                 generated by a function definition in gaol_interval.h
include(CheckCXXCompilerFlag)
check_cxx_compiler_flag("-Wno-deprecated" COMPILER_SUPPORTS_WNO_DEPRECATED)
if(COMPILER_SUPPORTS_WNO_DEPRECATED)
  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-deprecated")
endif()
################################################################################

# Compilation
add_executable(${PROJECT_NAME} main.cpp)
target_compile_options(${PROJECT_NAME} PUBLIC ${TUBEX_CFLAGS})
target_include_directories(${PROJECT_NAME} SYSTEM PUBLIC ${TUBEX_INCLUDE_DIRS})
target_link_libraries(${PROJECT_NAME} PUBLIC ${TUBEX_LDFLAGS} ${PKG_CAPD_LDFLAGS})



